{% extends "base.html" %}

{% block content %}
<div class="container mt-4" style="max-width: 700px;">
    <h1>My Availability</h1>
    <p class="text-muted">
        Add the times when you are available for mentoring.
    </p>

    <form method="post" class="mb-4">
        {% csrf_token %}

        <div class="mb-3">
            <label class="form-label">Days of the week</label>
            {{ form.day_of_week }}
            {% if form.day_of_week.errors %}
                <div class="text-danger small">{{ form.day_of_week.errors }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label class="form-label">Start time</label>
            {{ form.start_time }}
            {% if form.start_time.errors %}
                <div class="text-danger small">{{ form.start_time.errors }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label class="form-label">End time</label>
            {{ form.end_time }}
            {% if form.end_time.errors %}
                <div class="text-danger small">{{ form.end_time.errors }}</div>
            {% endif %}
        </div>

        <button type="submit" class="btn btn-primary w-100">
            Add
        </button>
    </form>

    <h4>Existing Availability</h4>
    {% if availabilities %}
        <ul class="list-group mt-2">
            {% for a in availabilities %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span>
                        {{ a.get_day_of_week_display }}:
                        {{ a.start_time }} â€“ {{ a.end_time }}
                    </span>

                    <form method="post"
                          action="{% url 'delete_availability' a.id %}">
                        {% csrf_token %}
                        <button type="submit"
                                class="btn btn-sm btn-outline-danger">
                            Remove
                        </button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="mt-2 text-muted">
            You have not set any availability yet.
        </p>
    {% endif %}
</div>
{% endblock %}
